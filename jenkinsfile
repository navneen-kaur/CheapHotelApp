pipeline {
  agent none
  stages {
    stage('Docker Build') {
    node {
        checkout scm

        docker.withRegistry('https://hub.docker.com', 'docker-id') {

            def customImage = docker.build("my-image:1")

            /* Push the container to the custom Registry */
            customImage.push()
        }
    }
    }
  }
}